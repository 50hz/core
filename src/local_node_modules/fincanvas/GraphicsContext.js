'use strict';

var logger;
//logger = require('./gc-console-logger')('GC'); // uncomment to log API calls to console

function GraphicsContext(gc) {
    this.gc = gc;
    addMissingStubs.call(this);
}

function addMissingStubs() {
    var gc = this.gc,
        objects = [gc, Object.getPrototypeOf(gc)],
        reWEBKIT = /^webkit/;

    /* eslint-disable no-loop-func */
    var self = this;
    objects.forEach(function(object) {
        Object.keys(object).forEach(function(key) {
            if (key in GraphicsContext.prototype || reWEBKIT.test(key)) {
                return;
            }
            if (typeof gc[key] === 'function') {
                self[key] = !logger ? gc[key].bind(gc) : function() {
                    return logger(key, arguments, gc[key].apply(gc, arguments));
                };
            } else {
                Object.defineProperty(self, key, {
                    get: function() {
                        var result = gc[key];
                        return logger ? logger(key, 'getter', result) : result;
                    },
                    set: function(value) {
                        gc[key] = logger ? logger(key, 'setter', value) : value;
                    }
                });
            }
        });
    });
}

module.exports = GraphicsContext;
